---
title: "Predicting Yellow and Red Cards"
author: "Nur Amira binti Johari"
date: "2023-07-20"
output: html_document
params:
  data: "Data.xlsx"
---
#CHAPTER ONE INTRODUCTION

##1.1 Background of Study
##1.2 Problem Statement
##1.3 Research Questions
##1.4 Research Objectives
##1.5 Scope and Limitations
##1.6 Flow of the Study
##1.7 Significance of the Study

#CHAPTER TWO LITERATURE REVIEW

##2.1 Related Studies
##2.2 Related Studies on the Method
##2.3 Summary of Literature Review

#CHAPTER THREE METHODOLOGY
##3.1 Data Description
The dataset provided by SmartOdds consists of 25 columns with the first and second columns being the numberings. Consists 27255 observations. Columns as follows:

fixture_id : a unique identifier for each football fixture
season : season in which the fixture took place
season_start_date : start date of the season
season_end_date : end date of the season
country : country where the fixture took place
league :league in which the fixture took place
competition_level : level of competition (1 or 2)
kick_off_datetime : date and time of the fixture's kickoff
team1_name : name of the first team participating in the game
team2_name : name of the second team participating in the game
referee : name of referee assigned to officiate the match
sup_implied : expected home team's goal supremacy based on the available Asian handicap odds
tg_implied : expected total number of goals in the match based on the available Asian handicap odds
team1_yc : number of yellow cards received by team1
team2_yc : number of yellow cards received by team2
team1_rc : number of red cards received by team1
team2_rc : number of red cards received by team2
team1_bk : booking points accumulated by team1 according  to Pinnacle's booking rules
team2_bk : booking points accumulated by team2 according to Pinnacle's booking rules
bksup : final bookings supremacy score according to Pinnacle's bookings rules
bktot : final total bookings count according to Pinnacle's bookings rules
attendance_value : number of attendees in a match
limited_audience : 

##3.2 Data Pre-Processing

###Import Data

```{r setup, echo=FALSE, warning=FALSE}
#load required libraries
library(readxl)
library(tidyverse)

#import data
dataset <- read_excel(params$data)
glimpse(dataset)
attach(dataset)
#list of variable names
names(dataset)
View(sort(table(referee),decreasing = TRUE))
```

##Check for duplicates
```{r}
# Check for duplicates
paste("The number of duplicates in the data is", anyDuplicated(dataset))
```

##Check and handle missing data
```{r}
# Check for missing values in the entire dataset
library(knitr)
library(kableExtra)

colSums(is.na(dataset))

# Load the necessary libraries (if not already loaded)
library(dplyr)

# Calculate the number of missing values for each variable
missing_values <- colSums(is.na(dataset))

# Create a data frame with 2 rows and variables as columns
missing_df <- data.frame(variable = names(missing_values), missing_count = missing_values)

# Transpose the data frame to have 2 rows and variables as columns
missing_df <- t(missing_df)

# Convert the transposed data frame back to a data frame
missing_df <- as.data.frame(missing_df, stringsAsFactors = FALSE)

# Set the first row as column names
colnames(missing_df) <- missing_df[1, ]

# Remove the first row, as it's now used as column names
missing_df <- missing_df[-1, ]


cat(table_output)
```


```{r setup, include=FALSE}
#Load packages
library(corrplot)
library(ggplot2)
library(tidyverse)
library(readxl)
library(lubridate)
```


```{r}
# Count missing values in each column
missing_counts <- colSums(is.na(dataset))

# Percentage of missing values in each column
missing_percent <- colSums(is.na(dataset)) / nrow(dataset) * 100

# Identify rows with missing values
rows_with_missing <- dataset[apply(dataset, 1, function(row) any(is.na(row))), ]
```

#Notes

Attendance is not a reliable variable as there is 0 attendance during covid.
